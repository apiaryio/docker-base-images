FROM        oraclelinux:7-slim
MAINTAINER  Apiary <sre@apiary.io>

ENV REFRESHED_AT 2020-09-25
ENV NODEJS_VERSION_MAJOR 12
ENV NPM_VERSION 6.13.4

USER root

RUN yum install -y oracle-nodejs-release-el7 \
    && yum-config-manager --enable ol7_developer_nodejs${NODEJS_VERSION_MAJOR} \
    && yum install -y nodejs \
    && yum install -y gcc gcc-c++ autoconf automake make \
    && npm i -g npm@${NPM_VERSION} \
    && yum clean all \
    && mkdir -p /app

WORKDIR /app

RUN node -v
RUN npm -v

ENTRYPOINT [ "bash" ]
